import py
from _pytest._code import getfslineno as getfslineno
from _pytest._code.code import ExceptionInfo as ExceptionInfo, TerminalRepr as TerminalRepr, _TracebackStyle
from _pytest.compat import cached_property as cached_property
from _pytest.config import Config as Config, ConftestImportFailure as ConftestImportFailure
from _pytest.deprecated import FSCOLLECTOR_GETHOOKPROXY_ISINITPATH as FSCOLLECTOR_GETHOOKPROXY_ISINITPATH
from _pytest.main import Session as Session
from _pytest.mark.structures import Mark as Mark, MarkDecorator as MarkDecorator, NodeKeywords as NodeKeywords
from _pytest.outcomes import fail as fail
from _pytest.pathlib import absolutepath as absolutepath
from _pytest.store import Store as Store
from typing import Any, Callable, Iterable, Iterator, List, Optional, Set, Tuple, Type, Union

SEP: str
tracebackcutdir: Any

def iterparentnodeids(nodeid: str) -> Iterator[str]: ...

class NodeMeta(type):
    def __call__(self, *k: Any, **kw: Any) -> None: ...

class Node(metaclass=NodeMeta):
    name: Any = ...
    parent: Any = ...
    config: Any = ...
    session: Any = ...
    fspath: Any = ...
    keywords: Any = ...
    own_markers: Any = ...
    extra_keyword_matches: Any = ...
    def __init__(self, name: str, parent: Optional[Node]=..., config: Optional[Config]=..., session: Optional[Session]=..., fspath: Optional[py.path.local]=..., nodeid: Optional[str]=...) -> None: ...
    @classmethod
    def from_parent(cls: Any, parent: Node, **kw: Any) -> Any: ...
    @property
    def ihook(self): ...
    def warn(self, warning: Warning) -> None: ...
    @property
    def nodeid(self) -> str: ...
    def __hash__(self) -> int: ...
    def setup(self) -> None: ...
    def teardown(self) -> None: ...
    def listchain(self) -> List[Node]: ...
    def add_marker(self, marker: Union[str, MarkDecorator], append: bool=...) -> None: ...
    def iter_markers(self, name: Optional[str]=...) -> Iterator[Mark]: ...
    def iter_markers_with_node(self, name: Optional[str]=...) -> Iterator[Tuple[Node, Mark]]: ...
    def get_closest_marker(self, name: str) -> Optional[Mark]: ...
    def get_closest_marker(self, name: str, default: Mark) -> Mark: ...
    def get_closest_marker(self, name: str, default: Optional[Mark]=...) -> Optional[Mark]: ...
    def listextrakeywords(self) -> Set[str]: ...
    def listnames(self) -> List[str]: ...
    def addfinalizer(self, fin: Callable[[], object]) -> None: ...
    def getparent(self, cls: Type[_NodeType]) -> Optional[_NodeType]: ...
    def repr_failure(self, excinfo: ExceptionInfo[BaseException], style: Optional[_TracebackStyle]=...) -> Union[str, TerminalRepr]: ...

def get_fslocation_from_item(node: Node) -> Tuple[Union[str, py.path.local], Optional[int]]: ...

class Collector(Node):
    class CollectError(Exception): ...
    def collect(self) -> Iterable[Union[Item, Collector]]: ...
    def repr_failure(self, excinfo: ExceptionInfo[BaseException]) -> Union[str, TerminalRepr]: ...

class FSCollector(Collector):
    fspath: Any = ...
    def __init__(self, fspath: py.path.local, parent: Any=..., config: Optional[Config]=..., session: Optional[Session]=..., nodeid: Optional[str]=...) -> None: ...
    @classmethod
    def from_parent(cls, parent: Any, fspath: Any, **kw: Any): ...
    def gethookproxy(self, fspath: py.path.local) -> Any: ...
    def isinitpath(self, path: py.path.local) -> bool: ...

class File(FSCollector): ...

class Item(Node):
    nextitem: Any = ...
    user_properties: Any = ...
    def __init__(self, name: Any, parent: Any=..., config: Optional[Config]=..., session: Optional[Session]=..., nodeid: Optional[str]=...) -> None: ...
    def runtest(self) -> None: ...
    def add_report_section(self, when: str, key: str, content: str) -> None: ...
    def reportinfo(self) -> Tuple[Union[py.path.local, str], Optional[int], str]: ...
    def location(self) -> Tuple[str, Optional[int], str]: ...
